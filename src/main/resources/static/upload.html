<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êñá‰ª∂‰∏ä‰º† - Êñá‰ª∂‰∏ä‰º†Á≥ªÁªü</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: white;
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .upload-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-bottom: 30px;
            transition: transform 0.3s ease;
        }

        .upload-card:hover {
            transform: translateY(-5px);
        }

        .upload-area {
            border: 3px dashed #d1d5db;
            border-radius: 16px;
            padding: 60px 20px;
            text-align: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            background: linear-gradient(145deg, #f8f9fa, #ffffff);
        }
        
        .upload-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.5s;
        }

        .upload-area.dragover {
            border-color: #667eea;
            background: linear-gradient(145deg, #f0f4ff, #ffffff);
            transform: scale(1.02);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.15);
        }
        
        .upload-area:hover::before {
            left: 100%;
        }

        .upload-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 36px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        
        .upload-area:hover .upload-icon {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.4);
        }

        .upload-text {
            color: #1f2937;
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 15px;
            letter-spacing: -0.3px;
        }

        .upload-hint {
            color: #6b7280;
            font-size: 15px;
            font-weight: 400;
            line-height: 1.4;
            margin-bottom: 20px;
        }

        .file-input {
            display: none;
        }

        .select-btn {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
            border: none;
            padding: 14px 35px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(107, 114, 128, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .select-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .select-btn:hover {
            background: linear-gradient(135deg, #4b5563, #374151);
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(107, 114, 128, 0.25);
        }
        
        .select-btn:hover::before {
            left: 100%;
        }
        
        .select-btn:active {
            transform: translateY(-1px);
        }

        .file-list {
            margin-top: 30px;
        }

        .file-item {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid #e5e7eb;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .file-item:hover {
            background: #e9ecef;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-color: #d1d5db;
        }

        .file-info {
            display: flex;
            align-items: center;
            flex: 1;
        }

        .file-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            margin-right: 15px;
        }

        .file-details {
            flex: 1;
        }

        .file-name {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 8px;
            font-size: 16px;
            letter-spacing: -0.2px;
        }

        .file-size {
            color: #6b7280;
            font-size: 14px;
            font-weight: 500;
        }

        .file-actions {
            display: flex;
            gap: 10px;
        }

        .remove-btn {
            background: linear-gradient(135deg, #9ca3af, #6b7280);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(156, 163, 175, 0.2);
        }

        .remove-btn:hover {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(156, 163, 175, 0.25);
        }
        
        .remove-btn:active {
            transform: translateY(0);
        }

        .upload-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .upload-btn {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .cancel-upload-btn {
            background: linear-gradient(135deg, #9ca3af, #6b7280);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .cancel-upload-btn:hover {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(156, 163, 175, 0.25);
        }

        .cancel-upload-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .cancel-upload-btn:hover::before {
            left: 100%;
        }

        .upload-btn:hover {
            background: linear-gradient(135deg, #4b5563, #374151);
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(107, 114, 128, 0.25);
        }

        .upload-btn:disabled {
            background: linear-gradient(135deg, #9ca3af, #6b7280);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .upload-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .upload-btn:hover::before {
            left: 100%;
        }
        
        .upload-btn:disabled::before {
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 20px;
            overflow: hidden;
            margin: 25px 0;
            display: none;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2, #10b981);
            width: 0%;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .status-message {
            text-align: center;
            margin-top: 20px;
            padding: 20px 25px;
            border-radius: 16px;
            font-weight: 600;
            display: none;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .status-success {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.1));
            color: #047857;
            border: 1px solid rgba(16, 185, 129, 0.3);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.15);
        }
        
        .status-success::before {
            content: '‚úì';
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            font-weight: bold;
        }

        .status-error {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1));
            color: #b91c1c;
            border: 1px solid rgba(239, 68, 68, 0.3);
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.15);
        }
        
        .status-error::before {
            content: '‚úï';
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            font-weight: bold;
        }

        .back-btn {
            position: fixed;
            top: 30px;
            left: 30px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .upload-card {
            animation: fadeIn 0.6s ease-out;
        }

        .server-files-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            padding: 0;
            margin-bottom: 30px;
            transition: all 0.3s ease;
            animation: fadeIn 0.6s ease-out 0.2s both;
            overflow: hidden;
        }

        .server-files-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.2);
        }

        .server-files-header {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 30px 40px;
            margin: 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .server-files-title {
            color: #1f2937;
            font-size: 28px;
            font-weight: 700;
            margin: 0;
            letter-spacing: -0.5px;
        }

        .refresh-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 6px 15px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .refresh-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .refresh-btn:hover {
            background: linear-gradient(135deg, #5a6fd8, #6b46c1);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }
        
        .refresh-btn:hover::before {
            left: 100%;
        }

        .server-files-content {
            padding: 40px;
        }
        
        .server-file-item {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid #e5e7eb;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            position: relative;
            overflow: hidden;
        }
        
        .server-file-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.05), transparent);
            transition: left 0.5s;
        }

        .server-file-item:hover {
            background: linear-gradient(145deg, #f8f9fa, #ffffff);
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
            border-color: #d1d5db;
        }
        
        .server-file-item:hover::before {
            left: 100%;
        }

        .server-file-actions {
            display: flex;
            gap: 12px;
            align-items: center;
            padding: 8px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .server-file-actions:hover {
            background: rgba(255, 255, 255, 0.7);
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
        }

        .delete-btn {
            background: linear-gradient(135deg, #9ca3af, #6b7280);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(156, 163, 175, 0.2);
            position: relative;
            overflow: hidden;
            min-width: 80px;
        }
        
        .delete-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            transition: left 0.5s;
        }

        .delete-btn:hover {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(156, 163, 175, 0.25);
        }
        
        .delete-btn:hover::before {
            left: 100%;
        }
        
        .delete-btn:active {
            transform: translateY(0);
            transition: all 0.1s ease;
        }

        .delete-btn:disabled {
            background: linear-gradient(135deg, #e5e7eb, #d1d5db);
            color: #9ca3af;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 6px rgba(156, 163, 175, 0.15);
        }
        
        .delete-btn:disabled::before {
            display: none;
        }

        .download-btn {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(107, 114, 128, 0.2);
            position: relative;
            overflow: hidden;
            min-width: 80px;
        }
        
        .download-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            transition: left 0.5s;
        }

        .download-btn:hover {
            background: linear-gradient(135deg, #4b5563, #374151);
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(107, 114, 128, 0.25);
        }
        
        .download-btn:hover::before {
            left: 100%;
        }
        
        .download-btn:active {
            transform: translateY(0);
            transition: all 0.1s ease;
        }

        .download-btn:disabled {
            background: linear-gradient(135deg, #e5e7eb, #d1d5db);
            color: #9ca3af;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 6px rgba(156, 163, 175, 0.15);
        }
        
        .download-btn:disabled::before {
            display: none;
        }

        .server-file-info {
            display: flex;
            align-items: center;
            flex: 1;
            gap: 15px;
        }

        .server-file-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            flex-shrink: 0;
        }

        .server-file-details {
            flex: 1;
        }

        .server-file-name {
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
            font-size: 18px;
            letter-spacing: -0.3px;
            word-break: break-all;
        }

        .server-file-meta {
            color: #6b7280;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            gap: 25px;
        }
        
        .file-detail-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .file-detail-item::before {
            content: '';
            width: 4px;
            height: 4px;
            background: #9ca3af;
            border-radius: 50%;
        }

        .loading-message {
            text-align: center;
            color: #6b7280;
            font-style: italic;
            padding: 40px 20px;
        }

        .empty-message {
            text-align: center;
            color: #6b7280;
            padding: 40px 20px;
        }

        .empty-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .error-message {
            text-align: center;
            color: #ef4444;
            padding: 40px 20px;
            background: #fee2e2;
            border-radius: 12px;
            border: 1px solid #fca5a5;
        }

        .file-count {
            color: #6b7280;
            font-size: 14px;
            margin-top: 20px;
            text-align: center;
        }
        
        /* Ëá™ÂÆö‰πâÂà†Èô§Á°ÆËÆ§Ê®°ÊÄÅÊ°Ü */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 450px;
            width: 90%;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            transform: scale(0.8) translateY(20px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .modal-overlay.show .modal {
            transform: scale(1) translateY(0);
        }
        
        .modal-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            font-size: 36px;
            color: white;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: #374151;
            margin-bottom: 15px;
        }
        
        .modal-message {
            font-size: 16px;
            color: #6b7280;
            margin-bottom: 30px;
            line-height: 1.5;
        }
        
        .modal-filename {
            background: #f3f4f6;
            padding: 12px 16px;
            border-radius: 10px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            color: #374151;
            margin: 15px 0;
            word-break: break-all;
            border-left: 4px solid #ef4444;
        }
        
        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .modal-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }
        
        .modal-btn-cancel {
            background: #f3f4f6;
            color: #6b7280;
        }
        
        .modal-btn-cancel:hover {
            background: #e5e7eb;
            color: #374151;
            transform: translateY(-2px);
        }
        
        .modal-btn-delete {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }
        
        .modal-btn-delete:hover {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.3);
        }
        
        .modal-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }




        /* ÈÉ®ÁΩ≤ÂäüËÉΩÊ†∑Âºè */
        .deploy-card {
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .deploy-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        }

        .deploy-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .deploy-title {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0 0 10px 0;
        }

        .deploy-hint {
            color: #64748b;
            font-size: 16px;
            margin: 0;
        }

        .deploy-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .deploy-input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .deploy-label {
            font-weight: 600;
            color: #374151;
            font-size: 14px;
        }

        .deploy-input {
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #ffffff;
        }

        .deploy-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .deploy-actions {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .deploy-output {
            background: #1f2937;
            color: #f9fafb;
            border-radius: 12px;
            padding: 20px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            line-height: 1.6;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            border: 1px solid #374151;
            display: none;
        }

        .deploy-output.show {
            display: block;
            animation: slideIn 0.3s ease-out;
        }

        .deploy-output::-webkit-scrollbar {
            width: 8px;
        }

        .deploy-output::-webkit-scrollbar-track {
            background: #374151;
            border-radius: 4px;
        }

        .deploy-output::-webkit-scrollbar-thumb {
            background: #6b7280;
            border-radius: 4px;
        }

        .deploy-output::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
        
        /* ÈÉ®ÁΩ≤ÊåâÈíÆÊ†∑Âºè */
        .execute-btn {
            background: linear-gradient(135deg, #64748b, #475569);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(100, 116, 139, 0.2);
            position: relative;
            overflow: hidden;
            flex: 1;
        }
        
        .execute-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            transition: left 0.5s;
        }
        
        .execute-btn:hover {
            background: linear-gradient(135deg, #475569, #334155);
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(100, 116, 139, 0.25);
        }
        
        .execute-btn:hover::before {
            left: 100%;
        }
        
        .execute-btn:active {
            transform: translateY(0);
            transition: all 0.1s ease;
        }
        
        .execute-btn:disabled {
            background: linear-gradient(135deg, #e2e8f0, #cbd5e1);
            color: #94a3b8;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 6px rgba(148, 163, 184, 0.15);
        }
        
        .execute-btn:disabled::before {
            display: none;
        }
        
        /* Ê∏ÖÁ©∫Êó•ÂøóÊåâÈíÆÊ†∑Âºè */
        .clear-btn {
            background: linear-gradient(135deg, #94a3b8, #64748b);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(148, 163, 184, 0.2);
            position: relative;
            overflow: hidden;
            flex: 1;
        }
        
        .clear-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            transition: left 0.5s;
        }
        
        .clear-btn:hover {
            background: linear-gradient(135deg, #64748b, #475569);
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(148, 163, 184, 0.25);
        }
        
        .clear-btn:hover::before {
            left: 100%;
        }
        
        .clear-btn:active {
            transform: translateY(0);
            transition: all 0.1s ease;
        }
    </style>
</head>
<body>
    <button class="back-btn" onclick="logout()">üö™ Ê≥®ÈîÄ</button>
    
    <div class="header">
        <h1>Êñá‰ª∂‰∏ä‰º†</h1>
        <p>ÈÄâÊã©Êñá‰ª∂Âπ∂‰∏ä‰º†Âà∞ÊúçÂä°Âô®</p>
    </div>

    <div class="container">
        <div class="upload-card">
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">üìÅ</div>
                <div class="upload-text">ÊãñÊãΩÊñá‰ª∂Âà∞Ê≠§Â§Ñ</div>
                <div class="upload-hint">ÊàñËÄÖÁÇπÂáª‰∏ãÊñπÊåâÈíÆÈÄâÊã©Êñá‰ª∂</div>
                <button class="select-btn" onclick="document.getElementById('fileInput').click()">ÈÄâÊã©Êñá‰ª∂</button>
                <input type="file" id="fileInput" class="file-input" multiple>
            </div>

            <div class="file-list" id="fileList"></div>

            <div class="upload-actions">
                <button class="upload-btn" id="uploadBtn" onclick="uploadFiles()" disabled>
                    ‰∏ä‰º†Êñá‰ª∂
                </button>
                <button class="cancel-upload-btn" id="cancelBtn" onclick="cancelUpload()" style="display: none;">
                    ÂèñÊ∂à‰∏ä‰º†
                </button>
            </div>

            <div class="progress-bar" id="progressBar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="status-message" id="statusMessage"></div>
        </div>

        <div class="server-files-card">
            <div class="server-files-header">
                <h2 class="server-files-title">ÊúçÂä°Âô®Êñá‰ª∂ÂàóË°®</h2>
                <button class="refresh-btn" onclick="loadServerFiles()">üîÑ Âà∑Êñ∞</button>
            </div>
            <div id="serverFilesList" class="server-files-content">
                <div class="loading-message">Ê≠£Âú®Âä†ËΩΩÊñá‰ª∂ÂàóË°®...</div>
            </div>
        </div>



        <div class="deploy-card">
            <div class="deploy-header">
                <h2 class="deploy-title">Ëá™Âä®ÈÉ®ÁΩ≤</h2>
                <div class="deploy-hint">ÊêúÁ¥¢Âπ∂‰∏ä‰º†Êñá‰ª∂ÔºåÁÑ∂ÂêéÊâßË°åÈÉ®ÁΩ≤ËÑöÊú¨</div>
            </div>
            <div class="deploy-content">
                <div class="deploy-input-group">
                    <label for="sourceDir" class="deploy-label">Ê∫êÁõÆÂΩï:</label>
                    <input type="text" id="sourceDir" class="deploy-input" placeholder="‰æãÂ¶Ç: C:\\Users\\17702\\Downloads" value="C:\\Users\\17702\\Downloads" />
                </div>
                <div class="deploy-input-group">
                    <label for="filePattern" class="deploy-label">Êñá‰ª∂Ê®°Âºè:</label>
                    <input type="text" id="filePattern" class="deploy-input" placeholder="‰æãÂ¶Ç: zhpj_api*.zip" value="zhpj_api*.zip" />
                </div>
                <div class="deploy-input-group">
                    <label for="deployScript" class="deploy-label">ÈÉ®ÁΩ≤ËÑöÊú¨:</label>
                    <input type="text" id="deployScript" class="deploy-input" placeholder="‰æãÂ¶Ç: deploy.bat" value="deploy.bat" />
                </div>
                <div class="deploy-actions">
                    <button class="execute-btn" onclick="startDeploy()" id="deployBtn">
                        üöÄ ÂºÄÂßãÈÉ®ÁΩ≤
                    </button>
                    <button class="clear-btn" onclick="clearDeployOutput()">
                        üóëÔ∏è Ê∏ÖÁ©∫Êó•Âøó
                    </button>
                </div>
                <div class="deploy-output" id="deployOutput"></div>
            </div>
        </div>
    </div>

    <!-- Ëá™ÂÆö‰πâÂà†Èô§Á°ÆËÆ§Ê®°ÊÄÅÊ°Ü -->
    <div id="deleteModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-icon">üóëÔ∏è</div>
            <div class="modal-title">Á°ÆËÆ§Âà†Èô§Êñá‰ª∂</div>
            <div class="modal-message">
                ÊÇ®Á°ÆÂÆöË¶ÅÂà†Èô§‰ª•‰∏ãÊñá‰ª∂ÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄÔºÅ
            </div>
            <div id="modalFilename" class="modal-filename"></div>
            <div class="modal-actions">
                <button id="modalCancel" class="modal-btn modal-btn-cancel">ÂèñÊ∂à</button>
                <button id="modalConfirm" class="modal-btn modal-btn-delete">Âà†Èô§</button>
            </div>
        </div>
    </div>

    <script>
        let selectedFiles = [];
        
        // ‰ºöËØùÁÆ°ÁêÜ
        let sessionId = null;
        let sessionTimer = null;
        const SESSION_TIMEOUT = 10 * 60 * 1000; // 10ÂàÜÈíü
        
        // ÂàùÂßãÂåñ‰ºöËØù
        async function initSession(authSessionId) {
            try {
                const response = await fetch('/api/session/create', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        authSessionId: authSessionId
                    })
                });
                
                if (!response.ok) {
                    throw new Error('ÂàõÂª∫‰ºöËØùÂ§±Ë¥•');
                }
                
                const result = await response.json();
                if (result.success) {
                    sessionId = result.sessionId;
                    startSessionTimer();
                    console.log('Êñá‰ª∂‰∏ä‰º†‰ºöËØùÂàõÂª∫ÊàêÂäü:', sessionId);
                    // ‰ºöËØùÂàõÂª∫ÊàêÂäüÂêéÂä†ËΩΩÊñá‰ª∂ÂàóË°®
                    await loadServerFiles();
                } else {
                    // Â¶ÇÊûú‰ºöËØùÂàõÂª∫Â§±Ë¥•ÔºåÂèØËÉΩÊòØËÆ§ËØÅ‰ºöËØùËøáÊúüÔºåÈáçÂÆöÂêëÂà∞ÁôªÂΩïÈ°µÈù¢
                    console.error('ÂàõÂª∫‰ºöËØùÂ§±Ë¥•:', result.message);
                    if (result.message && result.message.includes('ËÆ§ËØÅ‰ºöËØù')) {
                        alert('ËÆ§ËØÅÂ∑≤ËøáÊúüÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï');
                        localStorage.removeItem('fileupload_auth_session');
                        localStorage.removeItem('fileupload_auth_time');
                        window.location.href = 'index.html';
                        return;
                    }
                    throw new Error(result.message || 'ÂàõÂª∫‰ºöËØùÂ§±Ë¥•');
                }
            } catch (error) {
                console.error('ÂàùÂßãÂåñ‰ºöËØùÂ§±Ë¥•:', error);
                alert('‰ºöËØùÂàùÂßãÂåñÂ§±Ë¥•ÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï');
            }
        }
        
        // ÂêØÂä®‰ºöËØùËÆ°Êó∂Âô®
        function startSessionTimer() {
            if (sessionTimer) {
                clearTimeout(sessionTimer);
            }
            sessionTimer = setTimeout(() => {
                sessionExpired();
            }, SESSION_TIMEOUT);
        }
        
        // ÈáçÁΩÆ‰ºöËØùËÆ°Êó∂Âô®
        function resetSessionTimer() {
            if (sessionId) {
                startSessionTimer();
            }
        }
        
        // ‰ºöËØùËøáÊúüÂ§ÑÁêÜ
        function sessionExpired() {
            sessionId = null;
            if (sessionTimer) {
                clearTimeout(sessionTimer);
                sessionTimer = null;
            }
            alert('‰ºöËØùÂ∑≤ËøáÊúüÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï');
            window.location.href = 'index.html';
        }
        
        // Ê£ÄÊü•‰ºöËØùÊúâÊïàÊÄß
        function isSessionValid() {
            return sessionId !== null;
        }
        
        // Ê£ÄÊü•ËÆøÈóÆÊùÉÈôê
        function checkAccess() {
            const authSessionId = localStorage.getItem('fileupload_auth_session');
            const authTime = localStorage.getItem('fileupload_auth_time');
            
            // Ê£ÄÊü•ÊòØÂê¶ÊúâËÆ§ËØÅ‰ºöËØùID
            if (!authSessionId) {
                console.log('Êú™ÊâæÂà∞ËÆ§ËØÅ‰ºöËØùÔºåÈáçÂÆöÂêëÂà∞ÁôªÂΩïÈ°µÈù¢');
                window.location.href = 'index.html';
                return false;
            }
            
            // Ê£ÄÊü•ËÆ§ËØÅÊòØÂê¶ËøáÊúüÔºà24Â∞èÊó∂Ôºâ
            if (authTime) {
                const authTimestamp = parseInt(authTime);
                const currentTime = Date.now();
                const AUTH_TIMEOUT = 24 * 60 * 60 * 1000; // 24Â∞èÊó∂
                
                if (currentTime - authTimestamp > AUTH_TIMEOUT) {
                    console.log('ËÆ§ËØÅ‰ºöËØùÂ∑≤ËøáÊúüÔºåÊ∏ÖÁêÜÊú¨Âú∞Â≠òÂÇ®');
                    localStorage.removeItem('fileupload_auth_session');
                    localStorage.removeItem('fileupload_auth_time');
                    localStorage.removeItem('fileupload_authenticated'); // Ê∏ÖÁêÜÊóßÁöÑËÆ§ËØÅÊ†áËÆ∞
                    window.location.href = 'index.html';
                    return false;
                }
            }
            
            return authSessionId; // ËøîÂõûËÆ§ËØÅ‰ºöËØùID
        }
        
        // È°µÈù¢Âä†ËΩΩÊó∂Ê£ÄÊü•ËÆøÈóÆÊùÉÈôêÂπ∂ÂàùÂßãÂåñ‰ºöËØù
        window.addEventListener('load', function() {
            const authSessionId = checkAccess();
            if (authSessionId) {
                initSession(authSessionId);
            }
        });
        
        // Áî®Êà∑Ê¥ªÂä®Êó∂ÈáçÁΩÆËÆ°Êó∂Âô®
        document.addEventListener('click', resetSessionTimer);
        document.addEventListener('keypress', resetSessionTimer);
        document.addEventListener('mousemove', resetSessionTimer);

        // Êñá‰ª∂ÈÄâÊã©Â§ÑÁêÜ
        document.getElementById('fileInput').addEventListener('change', function(e) {
            handleFiles(e.target.files);
        });

        // ÊãñÊãΩÂ§ÑÁêÜ
        const uploadArea = document.getElementById('uploadArea');
        
        uploadArea.addEventListener('dragover', function(e) {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', function(e) {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', function(e) {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            handleFiles(e.dataTransfer.files);
        });

        function handleFiles(files) {
            for (let file of files) {
                if (!selectedFiles.find(f => f.name === file.name && f.size === file.size)) {
                    selectedFiles.push(file);
                }
            }
            updateFileList();
            updateUploadButton();
        }

        function updateFileList() {
            const fileList = document.getElementById('fileList');
            fileList.innerHTML = '';

            selectedFiles.forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <div class="file-info">
                        <div class="file-icon">üìÑ</div>
                        <div class="file-details">
                            <div class="file-name">${file.name}</div>
                            <div class="file-size">${formatFileSize(file.size)}</div>
                        </div>
                    </div>
                    <div class="file-actions">
                        <button class="remove-btn" onclick="removeFile(${index})">ÁßªÈô§</button>
                    </div>
                `;
                fileList.appendChild(fileItem);
            });
        }

        function removeFile(index) {
            selectedFiles.splice(index, 1);
            updateFileList();
            updateUploadButton();
        }

        function updateUploadButton() {
            const uploadBtn = document.getElementById('uploadBtn');
            uploadBtn.disabled = selectedFiles.length === 0;
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Â≠òÂÇ®‰∏ä‰º†‰ºöËØù‰ø°ÊÅØÔºàÁî®‰∫éÊñ≠ÁÇπÁª≠‰º†Ôºâ
        const uploadSessions = new Map();
        let isUploading = false;
        let uploadAbortController = null;
        
        async function uploadFiles() {
            if (selectedFiles.length === 0) return;
            if (isUploading) return;

            const uploadBtn = document.getElementById('uploadBtn');
            const cancelBtn = document.getElementById('cancelBtn');
            const progressBar = document.getElementById('progressBar');
            const progressFill = document.getElementById('progressFill');
            const statusMessage = document.getElementById('statusMessage');

            isUploading = true;
            uploadAbortController = new AbortController();
            uploadBtn.disabled = true;
            uploadBtn.textContent = '‰∏ä‰º†‰∏≠...';
            cancelBtn.style.display = 'block';
            progressBar.style.display = 'block';
            statusMessage.style.display = 'none';

            try {
                let totalProgress = 0;
                const fileCount = selectedFiles.length;
                let successCount = 0;
                let failedFiles = [];

                for (let i = 0; i < selectedFiles.length; i++) {
                    const file = selectedFiles[i];
                    
                    try {
                        // Êõ¥Êñ∞Áä∂ÊÄÅÊòæÁ§∫ÂΩìÂâç‰∏ä‰º†ÁöÑÊñá‰ª∂
                        uploadBtn.textContent = `‰∏ä‰º†‰∏≠... (${i + 1}/${fileCount}) ${file.name}`;
                        
                        // ÂàÜÁâá‰∏ä‰º†Âçï‰∏™Êñá‰ª∂
                        const result = await uploadFileWithChunks(file, (fileProgress) => {
                            // ËÆ°ÁÆóÊÄª‰ΩìËøõÂ∫¶
                            const currentFileProgress = (i / fileCount) * 100 + (fileProgress / fileCount);
                            progressFill.style.width = currentFileProgress + '%';
                        });
                        
                        successCount++;
                        console.log(`Êñá‰ª∂‰∏ä‰º†ÊàêÂäü: ${file.name}, MD5: ${result.md5}`);
                        
                    } catch (error) {
                        console.error(`Êñá‰ª∂‰∏ä‰º†Â§±Ë¥•: ${file.name}`, error);
                        failedFiles.push({ file: file, error: error.message });
                    }
                    
                    totalProgress = ((i + 1) / fileCount) * 100;
                    progressFill.style.width = totalProgress + '%';
                }

                // ÊòæÁ§∫‰∏ä‰º†ÁªìÊûú
                if (failedFiles.length === 0) {
                    statusMessage.textContent = `ÊàêÂäü‰∏ä‰º† ${successCount} ‰∏™Êñá‰ª∂ÔºÅ`;
                    statusMessage.className = 'status-message status-success';
                    // Ê∏ÖÁ©∫Êñá‰ª∂ÂàóË°®
                    selectedFiles = [];
                    updateFileList();
                } else {
                    const failedNames = failedFiles.map(f => f.file.name).join(', ');
                    statusMessage.textContent = `ÊàêÂäü: ${successCount}‰∏™, Â§±Ë¥•: ${failedFiles.length}‰∏™ (${failedNames})`;
                    statusMessage.className = 'status-message status-error';
                    
                    // Âè™‰øùÁïôÂ§±Ë¥•ÁöÑÊñá‰ª∂
                    selectedFiles = failedFiles.map(f => f.file);
                    updateFileList();
                }
                
                statusMessage.style.display = 'block';
                
                // Âà∑Êñ∞ÊúçÂä°Âô®Êñá‰ª∂ÂàóË°®
                if (successCount > 0) {
                    loadServerFiles();
                }
                
            } catch (error) {
                console.error('‰∏ä‰º†ÈîôËØØ:', error);
                statusMessage.textContent = '‰∏ä‰º†Â§±Ë¥•: ' + error.message;
                statusMessage.className = 'status-message status-error';
                statusMessage.style.display = 'block';
            } finally {
                isUploading = false;
                uploadAbortController = null;
                uploadBtn.disabled = false;
                uploadBtn.textContent = '‰∏ä‰º†Êñá‰ª∂';
                cancelBtn.style.display = 'none';
                progressBar.style.display = 'none';
                progressFill.style.width = '0%';
                updateUploadButton();
            }
        }
        
        // ÂàÜÁâá‰∏ä‰º†Âçï‰∏™Êñá‰ª∂Ôºà‰ºòÂåñÁâàÊú¨ÔºöÊîØÊåÅÈáçËØï„ÄÅÂπ∂Âèë„ÄÅÊñ≠ÁÇπÁª≠‰º†Ôºâ
        async function uploadFileWithChunks(file, progressCallback) {
            const CHUNK_SIZE = 2 * 1024 * 1024; // 2MB
            const totalChunks = Math.ceil(file.size / CHUNK_SIZE);
            const MAX_RETRIES = 3; // ÊúÄÂ§ßÈáçËØïÊ¨°Êï∞
            const CONCURRENT_CHUNKS = 3; // Âπ∂Âèë‰∏ä‰º†ÂàÜÁâáÊï∞
            
            // Ê£ÄÊü•‰ºöËØùÊúâÊïàÊÄß
            if (!isSessionValid()) {
                throw new Error('‰ºöËØùÂ∑≤ËøáÊúüÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçÊñ∞ÁôªÂΩï');
            }
            
            // 1. ÂàùÂßãÂåñ‰∏ä‰º†
            const initResponse = await fetch('/api/upload/init', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `fileName=${encodeURIComponent(file.name)}&fileSize=${file.size}&sessionId=${sessionId}`
            });
            
            if (!initResponse.ok) {
                throw new Error('ÂàùÂßãÂåñ‰∏ä‰º†Â§±Ë¥•');
            }
            
            const initResult = await initResponse.json();
            if (!initResult.success) {
                throw new Error(initResult.message);
            }
            
            const uploadId = initResult.uploadId;
            
            // 2. Âπ∂ÂèëÂàÜÁâá‰∏ä‰º†ÔºàÂ∏¶ÈáçËØïÊú∫Âà∂Ôºâ
            const uploadedChunks = new Set();
            const failedChunks = new Map(); // ËÆ∞ÂΩïÂ§±Ë¥•ÁöÑÂàÜÁâáÂíåÈáçËØïÊ¨°Êï∞
            
            // ÂàÜÁâá‰∏ä‰º†ÂáΩÊï∞ÔºàÂ∏¶ÈáçËØïÔºâ
            const uploadChunk = async (chunkIndex, retryCount = 0) => {
                try {
                    const start = chunkIndex * CHUNK_SIZE;
                    const end = Math.min(start + CHUNK_SIZE, file.size);
                    const chunk = file.slice(start, end);
                    
                    const formData = new FormData();
                    formData.append('uploadId', uploadId);
                    formData.append('chunkIndex', chunkIndex);
                    formData.append('chunk', chunk);
                    formData.append('sessionId', sessionId);
                    
                    const chunkResponse = await fetch('/api/upload/chunk', {
                        method: 'POST',
                        body: formData,
                        signal: uploadAbortController?.signal
                    });
                    
                    if (!chunkResponse.ok) {
                        throw new Error(`HTTP ${chunkResponse.status}`);
                    }
                    
                    const chunkResult = await chunkResponse.json();
                    if (!chunkResult.success) {
                        throw new Error(chunkResult.message);
                    }
                    
                    uploadedChunks.add(chunkIndex);
                    failedChunks.delete(chunkIndex); // ÊàêÂäüÂêéÁßªÈô§Â§±Ë¥•ËÆ∞ÂΩï
                    
                    // Êõ¥Êñ∞ËøõÂ∫¶
                    const progress = (uploadedChunks.size / totalChunks) * 100;
                    if (progressCallback) {
                        progressCallback(progress);
                    }
                    
                    return true;
                    
                } catch (error) {
                    console.warn(`ÂàÜÁâá ${chunkIndex} ‰∏ä‰º†Â§±Ë¥• (Á¨¨${retryCount + 1}Ê¨°Â∞ùËØï):`, error.message);
                    
                    if (retryCount < MAX_RETRIES) {
                        // ÊåáÊï∞ÈÄÄÈÅøÈáçËØï
                        const delay = Math.min(1000 * Math.pow(2, retryCount), 5000);
                        await new Promise(resolve => setTimeout(resolve, delay));
                        return uploadChunk(chunkIndex, retryCount + 1);
                    } else {
                        failedChunks.set(chunkIndex, retryCount + 1);
                        throw new Error(`ÂàÜÁâá ${chunkIndex + 1} ‰∏ä‰º†Â§±Ë¥•ÔºåÂ∑≤ÈáçËØï ${MAX_RETRIES} Ê¨°`);
                    }
                }
            };
            
            // Âπ∂Âèë‰∏ä‰º†ÊâÄÊúâÂàÜÁâá
            const chunkPromises = [];
            for (let i = 0; i < totalChunks; i += CONCURRENT_CHUNKS) {
                const batch = [];
                for (let j = 0; j < CONCURRENT_CHUNKS && i + j < totalChunks; j++) {
                    batch.push(uploadChunk(i + j));
                }
                
                // Á≠âÂæÖÂΩìÂâçÊâπÊ¨°ÂÆåÊàê
                try {
                    await Promise.all(batch);
                } catch (error) {
                    // Â¶ÇÊûúÊâπÊ¨°‰∏≠ÊúâÂ§±Ë¥•ÁöÑÂàÜÁâáÔºåËÆ∞ÂΩï‰ΩÜÁªßÁª≠
                    console.warn('ÊâπÊ¨°‰∏ä‰º†‰∏≠ÊúâÂàÜÁâáÂ§±Ë¥•:', error.message);
                }
            }
            
            // Ê£ÄÊü•ÊòØÂê¶ÊúâÂ§±Ë¥•ÁöÑÂàÜÁâá
            if (failedChunks.size > 0) {
                const failedList = Array.from(failedChunks.keys()).map(i => i + 1).join(', ');
                throw new Error(`‰ª•‰∏ãÂàÜÁâá‰∏ä‰º†Â§±Ë¥•: ${failedList}`);
            }
            
            // 3. ÂêàÂπ∂Êñá‰ª∂
            const mergeResponse = await fetch('/api/upload/merge', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `uploadId=${uploadId}&sessionId=${sessionId}`,
                signal: uploadAbortController?.signal
            });
            
            if (!mergeResponse.ok) {
                throw new Error('Êñá‰ª∂ÂêàÂπ∂Â§±Ë¥•');
            }
            
            const mergeResult = await mergeResponse.json();
            if (!mergeResult.success) {
                throw new Error(mergeResult.message);
            }
            
            return mergeResult;
        }

        // Âä†ËΩΩÊúçÂä°Âô®Êñá‰ª∂ÂàóË°®
        async function loadServerFiles() {
            const serverFilesList = document.getElementById('serverFilesList');
            
            try {
                serverFilesList.innerHTML = '<div class="loading-message">Ê≠£Âú®Âä†ËΩΩÊñá‰ª∂ÂàóË°®...</div>';
                
                // Ê£ÄÊü•‰ºöËØùÊúâÊïàÊÄß
                if (!isSessionValid()) {
                    throw new Error('‰ºöËØùÂ∑≤ËøáÊúüÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçÊñ∞ÁôªÂΩï');
                }
                
                const response = await fetch(`/api/files?sessionId=${sessionId}`);
                if (!response.ok) {
                    throw new Error('Ëé∑ÂèñÊñá‰ª∂ÂàóË°®Â§±Ë¥•');
                }
                
                const result = await response.json();
                
                if (!result.success) {
                    throw new Error(result.message || 'Ëé∑ÂèñÊñá‰ª∂ÂàóË°®Â§±Ë¥•');
                }
                
                const files = result.files || [];
                
                if (files.length === 0) {
                    serverFilesList.innerHTML = `
                        <div class="empty-message">
                            <div class="empty-icon">üìÇ</div>
                            <div>ÊöÇÊó†Êñá‰ª∂</div>
                            <div style="font-size: 12px; margin-top: 8px;">‰∏ä‰º†ÁõÆÂΩï: ${result.uploadPath || 'N/A'}</div>
                        </div>
                    `;
                    return;
                }
                
                // Ê†πÊçÆÊñá‰ª∂Êâ©Â±ïÂêçÈÄâÊã©ÂõæÊ†á
                const getFileIcon = (fileName) => {
                    const ext = fileName.split('.').pop().toLowerCase();
                    const iconMap = {
                        'pdf': 'üìÑ',
                        'doc': 'üìù', 'docx': 'üìù',
                        'xls': 'üìä', 'xlsx': 'üìä',
                        'ppt': 'üìà', 'pptx': 'üìà',
                        'txt': 'üìÉ',
                        'jpg': 'üñºÔ∏è', 'jpeg': 'üñºÔ∏è', 'png': 'üñºÔ∏è', 'gif': 'üñºÔ∏è', 'bmp': 'üñºÔ∏è',
                        'mp4': 'üé¨', 'avi': 'üé¨', 'mov': 'üé¨', 'wmv': 'üé¨',
                        'mp3': 'üéµ', 'wav': 'üéµ', 'flac': 'üéµ',
                        'zip': 'üì¶', 'rar': 'üì¶', '7z': 'üì¶',
                        'exe': '‚öôÔ∏è', 'msi': '‚öôÔ∏è',
                        'html': 'üåê', 'css': 'üé®', 'js': '‚ö°', 'json': 'üìã'
                    };
                    return iconMap[ext] || 'üìÑ';
                };
                
                let html = '';
                 files.forEach(file => {
                     html += `
                         <div class="server-file-item">
                             <div class="server-file-info">
                                 <div class="server-file-icon">${getFileIcon(file.name)}</div>
                                 <div class="server-file-details">
                                     <div class="server-file-name">${escapeHtml(file.name)}</div>
                                     <div class="server-file-meta">
                                         <span class="file-detail-item">Â§ßÂ∞è: ${file.sizeFormatted}</span>
                                         <span class="file-detail-item">‰øÆÊîπÊó∂Èó¥: ${file.lastModifiedFormatted}</span>
                                     </div>
                                 </div>
                             </div>
                             <div class="server-file-actions">
                                 <button class="download-btn" onclick="downloadFile('${escapeHtml(file.name)}')">üì• ‰∏ãËΩΩ</button>
                                 <button class="delete-btn" onclick="deleteServerFile('${escapeHtml(file.name)}')">üóëÔ∏è Âà†Èô§</button>
                             </div>
                         </div>
                     `;
                 });
                
                html += `<div class="file-count">ÂÖ± ${files.length} ‰∏™Êñá‰ª∂</div>`;
                serverFilesList.innerHTML = html;
                
            } catch (error) {
                console.error('Âä†ËΩΩÊñá‰ª∂ÂàóË°®Â§±Ë¥•:', error);
                serverFilesList.innerHTML = `
                    <div class="error-message">
                        ‚ùå Âä†ËΩΩÊñá‰ª∂ÂàóË°®Â§±Ë¥•<br>
                        <small>${error.message}</small>
                    </div>
                `;
            }
        }

        // HTMLËΩ¨‰πâÂáΩÊï∞
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÁöÑÂ§ÑÁêÜÔºàÊñá‰ª∂ÂàóË°®Â∞ÜÂú®‰ºöËØùÂàõÂª∫ÊàêÂäüÂêéËá™Âä®Âä†ËΩΩÔºâ
        document.addEventListener('DOMContentLoaded', function() {
            // Êñá‰ª∂ÂàóË°®Âä†ËΩΩÂ∑≤ÁßªËá≥initSessionÂáΩÊï∞‰∏≠
        });

        // ÊòæÁ§∫Âà†Èô§Á°ÆËÆ§Ê®°ÊÄÅÊ°Ü
         function showDeleteModal(fileName) {
             const modal = document.getElementById('deleteModal');
             const filenameElement = document.getElementById('modalFilename');
             
             filenameElement.textContent = fileName;
             modal.classList.add('show');
             
             // Èò≤Ê≠¢ËÉåÊôØÊªöÂä®
             document.body.style.overflow = 'hidden';
         }
         
         // ÈöêËóèÂà†Èô§Á°ÆËÆ§Ê®°ÊÄÅÊ°Ü
         function hideDeleteModal() {
             const modal = document.getElementById('deleteModal');
             modal.classList.remove('show');
             
             // ÊÅ¢Â§çËÉåÊôØÊªöÂä®
             document.body.style.overflow = 'auto';
         }
         
         // Âà†Èô§ÊúçÂä°Âô®Êñá‰ª∂
         async function deleteServerFile(fileName) {
             return new Promise((resolve) => {
                 showDeleteModal(fileName);
                 
                 const modal = document.getElementById('deleteModal');
                 const cancelBtn = document.getElementById('modalCancel');
                 const confirmBtn = document.getElementById('modalConfirm');
                 
                 // ÂèñÊ∂àÂà†Èô§
                 const handleCancel = () => {
                     hideDeleteModal();
                     cleanup();
                     resolve(false);
                 };
                 
                 // Á°ÆËÆ§Âà†Èô§
                 const handleConfirm = async () => {
                     try {
                         // Á¶ÅÁî®ÊåâÈíÆ
                         confirmBtn.disabled = true;
                         cancelBtn.disabled = true;
                         confirmBtn.textContent = 'Âà†Èô§‰∏≠...';
                         
                         // Á¶ÅÁî®ÊâÄÊúâÂà†Èô§ÊåâÈíÆ
                         const deleteButtons = document.querySelectorAll('.delete-btn');
                         deleteButtons.forEach(btn => btn.disabled = true);
                         
                         // Ê£ÄÊü•‰ºöËØùÊúâÊïàÊÄß
                         if (!isSessionValid()) {
                             throw new Error('‰ºöËØùÂ∑≤ËøáÊúüÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçÊñ∞ÁôªÂΩï');
                         }
                         
                         const response = await fetch(`/api/files/${encodeURIComponent(fileName)}?sessionId=${sessionId}`, {
                             method: 'DELETE'
                         });
                         
                         const result = await response.json();
                         
                         if (result.success) {
                             // Âà†Èô§ÊàêÂäüÔºåÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
                             const statusMessage = document.getElementById('statusMessage');
                             statusMessage.textContent = `Êñá‰ª∂ "${fileName}" Âà†Èô§ÊàêÂäüÔºÅ`;
                             statusMessage.className = 'status-message status-success';
                             statusMessage.style.display = 'block';
                             
                             // Âà∑Êñ∞Êñá‰ª∂ÂàóË°®
                             await loadServerFiles();
                             
                             // 3ÁßíÂêéÈöêËóèÊàêÂäüÊ∂àÊÅØ
                             setTimeout(() => {
                                 statusMessage.style.display = 'none';
                             }, 3000);
                         } else {
                             throw new Error(result.message || 'Âà†Èô§Â§±Ë¥•');
                         }
                         
                     } catch (error) {
                         console.error('Âà†Èô§Êñá‰ª∂Â§±Ë¥•:', error);
                         
                         // ÊòæÁ§∫ÈîôËØØÊ∂àÊÅØ
                         const statusMessage = document.getElementById('statusMessage');
                         statusMessage.textContent = `Âà†Èô§Êñá‰ª∂Â§±Ë¥•: ${error.message}`;
                         statusMessage.className = 'status-message status-error';
                         statusMessage.style.display = 'block';
                         
                         // 5ÁßíÂêéÈöêËóèÈîôËØØÊ∂àÊÅØ
                         setTimeout(() => {
                             statusMessage.style.display = 'none';
                         }, 5000);
                     } finally {
                         // ÈáçÊñ∞ÂêØÁî®ÊâÄÊúâÂà†Èô§ÊåâÈíÆ
                         const deleteButtons = document.querySelectorAll('.delete-btn');
                         deleteButtons.forEach(btn => btn.disabled = false);
                         
                         hideDeleteModal();
                         cleanup();
                         resolve(true);
                     }
                 };
                 
                 // Ê∏ÖÁêÜ‰∫ã‰ª∂ÁõëÂê¨Âô®
                 const cleanup = () => {
                     cancelBtn.removeEventListener('click', handleCancel);
                     confirmBtn.removeEventListener('click', handleConfirm);
                     modal.removeEventListener('click', handleModalClick);
                     document.removeEventListener('keydown', handleKeyDown);
                     
                     // ÈáçÁΩÆÊåâÈíÆÁä∂ÊÄÅ
                     confirmBtn.disabled = false;
                     cancelBtn.disabled = false;
                     confirmBtn.textContent = 'Âà†Èô§';
                 };
                 
                 // ÁÇπÂáªÊ®°ÊÄÅÊ°ÜËÉåÊôØÂÖ≥Èó≠
                 const handleModalClick = (e) => {
                     if (e.target === modal) {
                         handleCancel();
                     }
                 };
                 
                 // ESCÈîÆÂÖ≥Èó≠
                 const handleKeyDown = (e) => {
                     if (e.key === 'Escape') {
                         handleCancel();
                     }
                 };
                 
                 // Ê∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®
                 cancelBtn.addEventListener('click', handleCancel);
                 confirmBtn.addEventListener('click', handleConfirm);
                 modal.addEventListener('click', handleModalClick);
                 document.addEventListener('keydown', handleKeyDown);
             });
         }

         // ÂèñÊ∂à‰∏ä‰º†ÂäüËÉΩ
         function cancelUpload() {
             if (!isUploading || !uploadAbortController) return;
             
             uploadAbortController.abort();
             
             const statusMessage = document.getElementById('statusMessage');
             statusMessage.textContent = '‰∏ä‰º†Â∑≤ÂèñÊ∂à';
             statusMessage.className = 'status-message status-error';
             statusMessage.style.display = 'block';
             
             // 3ÁßíÂêéÈöêËóèÊ∂àÊÅØ
             setTimeout(() => {
                 statusMessage.style.display = 'none';
             }, 3000);
         }

         // ‰øÆÊîπ‰∏ä‰º†ÊàêÂäüÂêéÁöÑÂ§ÑÁêÜÔºåËá™Âä®Âà∑Êñ∞Êñá‰ª∂ÂàóË°®
         const originalUploadFiles = uploadFiles;
         uploadFiles = async function() {
             await originalUploadFiles();
             // Â¶ÇÊûú‰∏ä‰º†ÊàêÂäüÔºåÂà∑Êñ∞Êñá‰ª∂ÂàóË°®
             const statusMessage = document.getElementById('statusMessage');
             if (statusMessage.classList.contains('status-success')) {
                 setTimeout(() => {
                     loadServerFiles();
                 }, 1000); // Âª∂Ëøü1ÁßíÂà∑Êñ∞ÔºåÁ°Æ‰øùÊñá‰ª∂Â∑≤‰øùÂ≠ò
             }
         };

         // Ê≥®ÈîÄÂäüËÉΩ
         function logout() {
             if (confirm('Á°ÆÂÆöË¶ÅÊ≥®ÈîÄÂêóÔºü')) {
                 // Ê∏ÖÈô§ÊâÄÊúâËÆ§ËØÅÁõ∏ÂÖ≥ÁöÑÊú¨Âú∞Â≠òÂÇ®
                 localStorage.removeItem('fileupload_auth_session');
                 localStorage.removeItem('fileupload_auth_time');
                 localStorage.removeItem('fileupload_authenticated'); // Ê∏ÖÁêÜÊóßÁöÑËÆ§ËØÅÊ†áËÆ∞
                 sessionStorage.clear();
                 
                 // Ê∏ÖÁêÜ‰ºöËØù‰ø°ÊÅØ
                 sessionId = null;
                 if (sessionTimer) {
                     clearTimeout(sessionTimer);
                     sessionTimer = null;
                 }
                 
                 console.log('Áî®Êà∑Â∑≤Ê≥®ÈîÄÔºåÊ∏ÖÁêÜÂÆåÊàê');
                 
                 // Ë∑≥ËΩ¨Âà∞È¶ñÈ°µ
                 window.location.href = 'index.html';
             }
         }

         // Êñá‰ª∂‰∏ãËΩΩÂäüËÉΩ - ÊîØÊåÅÂàÜÁâá‰∏ãËΩΩ
         async function downloadFile(fileName) {
             try {
                 // Á¶ÅÁî®‰∏ãËΩΩÊåâÈíÆÔºåÈò≤Ê≠¢ÈáçÂ§çÁÇπÂáª
                 const downloadButtons = document.querySelectorAll('.download-btn');
                 downloadButtons.forEach(btn => btn.disabled = true);
                 
                 // ÊòæÁ§∫‰∏ãËΩΩÁä∂ÊÄÅ
                 const statusMessage = document.getElementById('statusMessage');
                 statusMessage.textContent = `Ê≠£Âú®‰∏ãËΩΩÊñá‰ª∂: ${fileName}`;
                 statusMessage.className = 'status-message status-info';
                 statusMessage.style.display = 'block';
                 
                 // Ê£ÄÊü•‰ºöËØùÊúâÊïàÊÄß
                 if (!isSessionValid()) {
                     throw new Error('‰ºöËØùÂ∑≤ËøáÊúüÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçÊñ∞ÁôªÂΩï');
                 }
                 
                 // ÂàõÂª∫‰∏ãËΩΩÈìæÊé•
                 const downloadUrl = `/api/files/${encodeURIComponent(fileName)}/download?sessionId=${sessionId}`;
                 
                 // Ëé∑ÂèñÊñá‰ª∂Â§ßÂ∞è
                 const headResponse = await fetch(downloadUrl, {
                     method: 'HEAD'
                 });
                 
                 if (!headResponse.ok) {
                     throw new Error(`Êñá‰ª∂‰∏ãËΩΩÂ§±Ë¥•: ${headResponse.status} ${headResponse.statusText}`);
                 }
                 
                 const fileSize = parseInt(headResponse.headers.get('Content-Length') || '0');
                 const chunkSize = 1024 * 1024; // 1MB ÂàÜÁâáÂ§ßÂ∞è
                 
                 // Â¶ÇÊûúÊñá‰ª∂Â∞è‰∫éÂàÜÁâáÂ§ßÂ∞èÔºåÁõ¥Êé•‰∏ãËΩΩ
                 if (fileSize <= chunkSize) {
                     await downloadFileDirectly(downloadUrl, fileName);
                 } else {
                     // ÂàÜÁâá‰∏ãËΩΩ
                     await downloadFileInChunks(downloadUrl, fileName, fileSize, chunkSize);
                 }
                 
                 // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
                 statusMessage.textContent = `Êñá‰ª∂‰∏ãËΩΩÂÆåÊàê: ${fileName}`;
                 statusMessage.className = 'status-message status-success';
                 
                 // 3ÁßíÂêéÈöêËóèÊ∂àÊÅØ
                 setTimeout(() => {
                     statusMessage.style.display = 'none';
                 }, 3000);
                 
             } catch (error) {
                 console.error('‰∏ãËΩΩÊñá‰ª∂Â§±Ë¥•:', error);
                 
                 // ÊòæÁ§∫ÈîôËØØÊ∂àÊÅØ
                 const statusMessage = document.getElementById('statusMessage');
                 statusMessage.textContent = `‰∏ãËΩΩÊñá‰ª∂Â§±Ë¥•: ${error.message}`;
                 statusMessage.className = 'status-message status-error';
                 statusMessage.style.display = 'block';
                 
                 // 5ÁßíÂêéÈöêËóèÈîôËØØÊ∂àÊÅØ
                 setTimeout(() => {
                     statusMessage.style.display = 'none';
                 }, 5000);
             } finally {
                 // ÈáçÊñ∞ÂêØÁî®ÊâÄÊúâ‰∏ãËΩΩÊåâÈíÆ
                 const downloadButtons = document.querySelectorAll('.download-btn');
                 downloadButtons.forEach(btn => btn.disabled = false);
             }
         }
         
         // Áõ¥Êé•‰∏ãËΩΩÂ∞èÊñá‰ª∂
         async function downloadFileDirectly(downloadUrl, fileName) {
             const response = await fetch(downloadUrl);
             if (!response.ok) {
                 throw new Error(`‰∏ãËΩΩÂ§±Ë¥•: ${response.status} ${response.statusText}`);
             }
             
             const blob = await response.blob();
             const url = window.URL.createObjectURL(blob);
             
             const link = document.createElement('a');
             link.href = url;
             link.download = fileName;
             link.style.display = 'none';
             document.body.appendChild(link);
             link.click();
             document.body.removeChild(link);
             
             window.URL.revokeObjectURL(url);
         }
         
         // ÂàÜÁâá‰∏ãËΩΩÂ§ßÊñá‰ª∂
         async function downloadFileInChunks(downloadUrl, fileName, fileSize, chunkSize) {
             const chunks = [];
             let downloadedBytes = 0;
             
             // ËÆ°ÁÆóÂàÜÁâáÊï∞Èáè
             const totalChunks = Math.ceil(fileSize / chunkSize);
             
             for (let i = 0; i < totalChunks; i++) {
                 const start = i * chunkSize;
                 const end = Math.min(start + chunkSize - 1, fileSize - 1);
                 
                 // Êõ¥Êñ∞‰∏ãËΩΩËøõÂ∫¶
                 const statusMessage = document.getElementById('statusMessage');
                 const progress = Math.round((i / totalChunks) * 100);
                 statusMessage.textContent = `Ê≠£Âú®‰∏ãËΩΩÊñá‰ª∂: ${fileName} (${progress}% - ÂàÜÁâá ${i + 1}/${totalChunks})`;
                 
                 // ÂèëÈÄÅRangeËØ∑Ê±Ç
                 const response = await fetch(downloadUrl, {
                     headers: {
                         'Range': `bytes=${start}-${end}`
                     }
                 });
                 
                 if (!response.ok && response.status !== 206) {
                     throw new Error(`ÂàÜÁâá‰∏ãËΩΩÂ§±Ë¥•: ${response.status} ${response.statusText}`);
                 }
                 
                 const chunk = await response.arrayBuffer();
                 chunks.push(chunk);
                 downloadedBytes += chunk.byteLength;
                 
                 // Ê£ÄÊü•‰ºöËØùÊúâÊïàÊÄß
                 if (!isSessionValid()) {
                     throw new Error('‰ºöËØùÂ∑≤ËøáÊúüÔºå‰∏ãËΩΩ‰∏≠Êñ≠');
                 }
             }
             
             // ÂêàÂπ∂ÊâÄÊúâÂàÜÁâá
             const statusMessage = document.getElementById('statusMessage');
             statusMessage.textContent = `Ê≠£Âú®ÂêàÂπ∂Êñá‰ª∂: ${fileName}`;
             
             const blob = new Blob(chunks);
             const url = window.URL.createObjectURL(blob);
             
             const link = document.createElement('a');
             link.href = url;
             link.download = fileName;
             link.style.display = 'none';
             document.body.appendChild(link);
             link.click();
             document.body.removeChild(link);
             
             window.URL.revokeObjectURL(url);
         }

         // ÈÉ®ÁΩ≤ÂäüËÉΩ
         async function startDeploy() {
             const sourceDir = document.getElementById('sourceDir').value.trim();
             const filePattern = document.getElementById('filePattern').value.trim();
             const deployScript = document.getElementById('deployScript').value.trim();
             const deployBtn = document.getElementById('deployBtn');
             const deployOutput = document.getElementById('deployOutput');
             
             if (!sourceDir || !filePattern || !deployScript) {
                 alert('ËØ∑Â°´ÂÜôÊâÄÊúâÂøÖÈúÄÁöÑÂ≠óÊÆµ');
                 return;
             }
             
             // Á¶ÅÁî®ÊåâÈíÆÔºåÊòæÁ§∫ÊâßË°åÁä∂ÊÄÅ
             deployBtn.disabled = true;
             deployBtn.textContent = 'üîÑ ÈÉ®ÁΩ≤‰∏≠...';
             
             // ÊòæÁ§∫ËæìÂá∫Âå∫Âüü
             deployOutput.classList.add('show');
             deployOutput.textContent = `ÂºÄÂßãÈÉ®ÁΩ≤ÊµÅÁ®ã...\nÊ∫êÁõÆÂΩï: ${sourceDir}\nÊñá‰ª∂Ê®°Âºè: ${filePattern}\nÈÉ®ÁΩ≤ËÑöÊú¨: ${deployScript}\n\n`;
             
             try {
                 // Á¨¨‰∏ÄÊ≠•ÔºöÊêúÁ¥¢Êñá‰ª∂
                 appendDeployLog('üîç Ê≠£Âú®ÊêúÁ¥¢ÂåπÈÖçÁöÑÊñá‰ª∂...');
                 
                 // Ê£ÄÊü•‰ºöËØùÊúâÊïàÊÄß
                 if (!isSessionValid()) {
                     throw new Error('‰ºöËØùÂ∑≤ËøáÊúüÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçÊñ∞ÁôªÂΩï');
                 }
                 
                 const searchResponse = await fetch('/api/deploy/search-files', {
                     method: 'POST',
                     headers: {
                         'Content-Type': 'application/json'
                     },
                     body: JSON.stringify({
                         sourceDir: sourceDir,
                         filePattern: filePattern,
                         sessionId: sessionId
                     })
                 });
                 
                 const searchResult = await searchResponse.json();
                 
                 if (!searchResult.success) {
                     throw new Error(searchResult.error || 'Êñá‰ª∂ÊêúÁ¥¢Â§±Ë¥•');
                 }
                 
                 if (!searchResult.files || searchResult.files.length === 0) {
                     throw new Error('Êú™ÊâæÂà∞ÂåπÈÖçÁöÑÊñá‰ª∂');
                 }
                 
                 appendDeployLog(`‚úÖ ÊâæÂà∞ ${searchResult.files.length} ‰∏™ÂåπÈÖçÊñá‰ª∂:`);
                 searchResult.files.forEach(file => {
                     appendDeployLog(`   - ${file}`);
                 });
                 
                 // Á¨¨‰∫åÊ≠•Ôºö‰∏ä‰º†Êñá‰ª∂
                 appendDeployLog('\nüì§ ÂºÄÂßã‰∏ä‰º†Êñá‰ª∂...');
                 
                 for (const filePath of searchResult.files) {
                     appendDeployLog(`Ê≠£Âú®‰∏ä‰º†: ${filePath}`);
                     
                     // Ê£ÄÊü•‰ºöËØùÊúâÊïàÊÄß
                     if (!isSessionValid()) {
                         throw new Error('‰ºöËØùÂ∑≤ËøáÊúüÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçÊñ∞ÁôªÂΩï');
                     }
                     
                     const uploadResponse = await fetch('/api/deploy/upload-file', {
                         method: 'POST',
                         headers: {
                             'Content-Type': 'application/json'
                         },
                         body: JSON.stringify({
                             filePath: filePath,
                             sessionId: sessionId
                         })
                     });
                     
                     const uploadResult = await uploadResponse.json();
                     
                     if (!uploadResult.success) {
                         throw new Error(`‰∏ä‰º†Êñá‰ª∂Â§±Ë¥•: ${uploadResult.error}`);
                     }
                     
                     appendDeployLog(`‚úÖ ‰∏ä‰º†ÊàêÂäü: ${uploadResult.fileName}`);
                 }
                 
                 // Á¨¨‰∏âÊ≠•ÔºöÊâßË°åÈÉ®ÁΩ≤ËÑöÊú¨
                 appendDeployLog('\nüöÄ ÂºÄÂßãÊâßË°åÈÉ®ÁΩ≤ËÑöÊú¨...');
                 
                 // Ê£ÄÊü•‰ºöËØùÊúâÊïàÊÄß
                 if (!isSessionValid()) {
                     throw new Error('‰ºöËØùÂ∑≤ËøáÊúüÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçÊñ∞ÁôªÂΩï');
                 }
                 
                 const scriptResponse = await fetch('/api/execute-script', {
                     method: 'POST',
                     headers: {
                         'Content-Type': 'application/json'
                     },
                     body: JSON.stringify({ 
                         command: deployScript,
                         sessionId: sessionId 
                     })
                 });
                 
                 const scriptResult = await scriptResponse.json();
                 
                 if (scriptResult.success) {
                     appendDeployLog('‚úÖ ÈÉ®ÁΩ≤ËÑöÊú¨ÊâßË°åÊàêÂäüÔºÅ');
                     if (scriptResult.output) {
                         appendDeployLog('ËÑöÊú¨ËæìÂá∫:');
                         appendDeployLog(scriptResult.output);
                     }
                 } else {
                     appendDeployLog('‚ùå ÈÉ®ÁΩ≤ËÑöÊú¨ÊâßË°åÂ§±Ë¥•ÔºÅ');
                     appendDeployLog(`ÈîôËØØ‰ø°ÊÅØ: ${scriptResult.error}`);
                 }
                 
                 appendDeployLog('\nüéâ ÈÉ®ÁΩ≤ÊµÅÁ®ãÂÆåÊàêÔºÅ');
                 
                 // Âà∑Êñ∞ÊúçÂä°Âô®Êñá‰ª∂ÂàóË°®
                 setTimeout(() => {
                     loadServerFiles();
                 }, 1000);
                 
             } catch (error) {
                 console.error('ÈÉ®ÁΩ≤Â§±Ë¥•:', error);
                 appendDeployLog(`\n‚ùå ÈÉ®ÁΩ≤Â§±Ë¥•: ${error.message}`);
             } finally {
                 // ÊÅ¢Â§çÊåâÈíÆÁä∂ÊÄÅ
                 deployBtn.disabled = false;
                 deployBtn.textContent = 'üöÄ ÂºÄÂßãÈÉ®ÁΩ≤';
                 
                 // ÊªöÂä®Âà∞ËæìÂá∫Âå∫ÂüüÂ∫ïÈÉ®
                 deployOutput.scrollTop = deployOutput.scrollHeight;
             }
         }
         
         // Ê∑ªÂä†ÈÉ®ÁΩ≤Êó•Âøó
         function appendDeployLog(message) {
             const deployOutput = document.getElementById('deployOutput');
             const timestamp = new Date().toLocaleTimeString();
             deployOutput.textContent += `[${timestamp}] ${message}\n`;
             deployOutput.scrollTop = deployOutput.scrollHeight;
         }
         
         // Ê∏ÖÁ©∫ÈÉ®ÁΩ≤ËæìÂá∫
         function clearDeployOutput() {
             const deployOutput = document.getElementById('deployOutput');
             deployOutput.textContent = '';
             deployOutput.classList.remove('show');
         }


    </script>
</body>
</html>